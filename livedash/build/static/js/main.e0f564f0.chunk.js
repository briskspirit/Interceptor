(this.webpackJsonplivedash=this.webpackJsonplivedash||[]).push([[0],{130:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a(0),i=a.n(n),r=a(12),o=a.n(r),l=a(19),c=a(13),d=a(14),h=a(16),u=a(15),j=a(50),p=a.n(j),b=a(87),x=a(94),g=a.n(x),m=a(95),v=a.n(m)()(g.a),O=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).layout={},s.state={data:Object.values(s.props.lines),layout:{colorway:["#ff7f0e","#2ca02c","#d62728","#9467bd","#e377c2","#bcbd22","#17becf","#1f77b4"],titlefont:{family:"Arial, sans-serif",size:24,color:"rgba(119,119,119,1)"},xaxis:{autorange:!0,gridcolor:"rgba(119,119,119,0.2)",color:"rgba(119,119,119,1)"},yaxis:{autorange:!0,color:"rgba(119,119,119,1)",gridcolor:"rgba(119,119,119,0.2)",tickangle:"auto",type:"linear"},showlegend:!0,legend:{x:0,y:1.06,orientation:"h",font:{color:"rgba(119,119,119,1)"}},plot_bgcolor:"rgba(0,0,0,0)",paper_bgcolor:"rgba(0,0,0,0)",width:700,height:450,margin:{l:50,r:5,b:30,t:50,pad:4},datarevision:0},frames:[],config:{displayModeBar:!0,displaylogo:!1},revision:0},s.responsiveChartRef=i.a.createRef(),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.responsiveChartRef.current.getBoundingClientRect().width-5,a=this.responsiveChartRef.current.getBoundingClientRect().height;t!==this.state.layout.width&&this.setState({layout:Object(l.a)(Object(l.a)({},this.state.layout),{},{width:t,height:a})}),this.resizeListener=window.addEventListener("resize",(function(){if(e.responsiveChartRef.current){var t=e.responsiveChartRef.current.getBoundingClientRect().width-5,a=e.responsiveChartRef.current.getBoundingClientRect().height;t!==e.state.layout.width&&e.setState({layout:Object(l.a)(Object(l.a)({},e.state.layout),{},{width:t,height:a})})}}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeListener)}},{key:"render",value:function(){var e=this;return Object(s.jsx)("div",{ref:this.responsiveChartRef,id:this.props.event.layout.title,style:{height:"46vh"},children:Object(s.jsx)(v,{data:this.state.data,layout:Object(l.a)(Object(l.a)(Object(l.a)({},this.layout),this.state.layout),this.props.event.layout),revision:this.props.event.revision,frames:[].concat(Object(b.a)(this.state.frames),Object(b.a)(this.props.event.frames)),config:Object(l.a)(Object(l.a)({},this.state.config),this.props.event.config),onUpdate:function(t){return e.layout=t.layout}})})}}]),a}(n.Component),f=a(62),_={thermal:{freeSpace:.2097935676574707,batteryPercent:100,batteryStatus:"Charging",fanSpeed:10,started:!1,usbOnline:!1,startedTs:0,thermalStatus:"green",batteryCurrent:594631,batteryVoltage:4237493,chargingError:!1,chargingDisabled:!1,memUsedPercent:35,cpuPerc:20,networkType:"wifi",offroadPowerUsage:25131,networkStrength:"good",carBatteryCapacity:29755978,cpu:[45.400001525878906,44.79999923706055,43.5,43.79999923706055],gpu:[41.900001525878906],mem:44.5,bat:0,ambient:36},controlsState:{vEgo:0,vPid:.30000001192092896,vTargetLead:0,upAccelCmd:0,uiAccelCmd:0,jerkFactor:0,angleSteers:94.94609832763672,cumLagMs:-7.119385719299316,enabled:!1,steerOverride:!1,canMonoTimes:[],vCruise:255,rearViewCam:!1,alertText1:"CAN Error: Check Connections",alertText2:"",awarenessStatus:0,planMonoTime:0xd299244e294,angleSteersDes:0,longControlState:"off",state:"disabled",vEgoRaw:0,ufAccelCmd:0,aTarget:0,active:!1,curvature:.04042794927954674,alertStatus:"normal",alertSize:"small",gpsPlannerActive:!1,engageable:!1,alertBlinkingRate:0,driverMonitoringOn:!0,alertType:"canError/permanent",vCurvature:0,decelForTurn:!1,startMonoTime:0xd2afaf25439,mapValid:!1,pathPlanMonoTime:0xd2a83117550,forceDecel:!1,":lateralControlState.indiState.active":!1,":lateralControlState.indiState.steerAngle":94.94609832763672,":lateralControlState.indiState.steerRate":-30533325976085657e-29,":lateralControlState.indiState.steerAccel":-24426660780868525e-28,":lateralControlState.indiState.rateSetPoint":0,":lateralControlState.indiState.accelSetPoint":0,":lateralControlState.indiState.accelError":0,":lateralControlState.indiState.delayedOutput":0,":lateralControlState.indiState.delta":0,":lateralControlState.indiState.output":0,":lateralControlState.indiState.saturated":!1,decelForModel:!1,alertSound:"none",canErrorCounter:0},health:{voltage:12087,current:0,ignitionLine:!1,controlsAllowed:!1,gasInterceptorDetected:!1,hasGps:!0,canSendErrs:2663915,canFwdErrs:0,gmlanSendErrs:0,hwType:"uno",fanSpeedRpm:375,usbPowerMode:"cdp",ignitionCan:!1,safetyModel:"noOutput",faultStatus:"none",powerSaveEnabled:!0,uptime:2419218,faults:[],canRxErrs:0},radarState:{":leadOne.dRel":0,":leadOne.yRel":0,":leadOne.vRel":0,":leadOne.aRel":0,":leadOne.vLead":0,":leadOne.dPath":0,":leadOne.vLat":0,":leadOne.vLeadK":0,":leadOne.aLeadK":0,":leadOne.fcw":!1,":leadOne.status":!1,":leadOne.aLeadTau":0,":leadOne.modelProb":0,":leadOne.radar":!1,":leadTwo.dRel":0,":leadTwo.yRel":0,":leadTwo.vRel":0,":leadTwo.aRel":0,":leadTwo.vLead":0,":leadTwo.dPath":0,":leadTwo.vLat":0,":leadTwo.vLeadK":0,":leadTwo.aLeadK":0,":leadTwo.fcw":!1,":leadTwo.status":!1,":leadTwo.aLeadTau":0,":leadTwo.modelProb":0,":leadTwo.radar":!1,cumLagMs:-40.058692932128906,mdMonoTime:0xd2991bbe7d8,canMonoTimes:[],controlsStateMonoTime:0xd2991b0f4b4,radarErrors:[]},liveCalibration:{calStatus:1,calCycle:0,calPerc:100,extrinsicMatrix:[.019966470077633858,-.9998006224632263,.00019015562429558486,0,.009523315355181694,-1.3552527156068805e-20,-.9999546408653259,1.2200000286102295,.999755322933197,.019967375323176384,.009521417319774628,0],rpyCalib:[-23826511096558534e-21,-.00952345971018076,.019968701526522636],rpyCalibSpread:[0,0,0],validBlocks:50},carState:{vEgo:0,":wheelSpeeds.fl":0,":wheelSpeeds.fr":0,":wheelSpeeds.rl":0,":wheelSpeeds.rr":0,gas:0,gasPressed:!1,brake:0,brakePressed:!1,steeringAngle:94.94609832763672,steeringTorque:-4,steeringPressed:!1,cruiseState:{enabled:!1,speed:0,available:!1,speedOffset:0,standstill:!1,nonAdaptive:!1},gearShifter:"park",steeringRate:0,aEgo:0,vEgoRaw:0,standstill:!0,brakeLights:!1,leftBlinker:!1,rightBlinker:!1,yawRate:0,genericToggle:!1,doorOpen:!1,seatbeltUnlatched:!1,canValid:!1,steeringTorqueEps:-42.5,clutchPressed:!1,steeringRateLimited:!1,stockAeb:!1,stockFcw:!1,espDisabled:!1,leftBlindspot:!1,rightBlindspot:!1,steerWarning:!1,steerError:!1},carControl:{enabled:!1,":cruiseControl.cancel":!1,":cruiseControl.override":!0,":cruiseControl.speedOverride":.30000001192092896,":cruiseControl.accelOverride":1,":hudControl.speedVisible":!1,":hudControl.setSpeed":70.83333587646484,":hudControl.lanesVisible":!1,":hudControl.leadVisible":!1,":hudControl.visualAlert":"none",":hudControl.audibleAlert":"none",":hudControl.rightLaneVisible":!1,":hudControl.leftLaneVisible":!1,":hudControl.rightLaneDepart":!1,":hudControl.leftLaneDepart":!1,":actuators.gas":0,":actuators.brake":0,":actuators.steer":0,":actuators.steerAngle":0,active:!1},longitudinalPlan:{vTarget:0,jerkFactor:0,hasLead:!1,fcw:!1,mdMonoTime:0xd2991bbe7d8,radarStateMonoTime:0xd29922451fd,vTargetFuture:11.54289436340332,longitudinalPlanSource:"cruise",vCruise:0,aCruise:0,aTarget:0,gpsPlannerActive:!1,vMax:0,vCurvature:0,decelForTurn:!1,mapValid:!1,vStart:0,aStart:0,radarValid:!0,processingDelay:.001614999957382679,radarCanError:!1,commIssue:!1},driverState:{frameId:137,faceOrientation:[-.1421688199043274,.3909642696380615,.3198798596858978],facePosition:[.2132532298564911,.2132532298564911],faceProb:.9951817393302917,leftEyeProb:.9596395492553711,rightEyeProb:.888555109500885,leftBlinkProb:.03554220497608185,rightBlinkProb:.03554220497608185,faceOrientationStd:[.07202030718326569,.05659650266170502,.045972857624292374],facePositionStd:[.0191628560423851,.00792522169649601],sgProb:.0710844099521637,modelExecutionTime:.018670208752155304,dspExecutionTime:.012666874565184116},liveParameters:{valid:!0,gyroBias:0,angleOffset:.13531090319156647,angleOffsetAverage:.13531090319156647,stiffnessFactor:1,steerRatio:15.864039421081543,sensorValid:!0,yawRate:0,posenetSpeed:0,posenetValid:!0},cameraOdometry:{trans:[.0141754150390625,-.00048542022705078125,.002925872802734375],rot:[0,0,0],transStd:[.023609790951013565,.015066033229231834,.0341513529419899],rotStd:[.0007046477403491735,.0006267267162911594,.0007678816327825189],frameId:343,timestampEof:0xd2a7f3bf3d8},lateralPlan:{laneWidth:2.799999952316284,lProb:.15726622939109802,rProb:.17652960121631622,angleSteers:-23.378400802612305,mpcSolutionValid:!0,angleOffset:.4804331064224243,rateSteers:0,desire:"none",laneChangeState:"off",laneChangeDirection:"none",dPathPoints:[-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125,-.005084991455078125],dProb:0},carParams:{carName:"toyota",carFingerprint:"TOYOTA COROLLA TSS2 2019",enableGasInterceptor:!1,enableCruise:!0,enableCamera:!0,enableDsu:!1,enableApgs:!1,minEnableSpeed:-1,minSteerSpeed:0,safetyModel:"toyota",safetyParam:50,steerMaxBP:[0],steerMaxV:[1],gasMaxBP:[0],gasMaxV:[.5],brakeMaxBP:[0],brakeMaxV:[1],mass:1523.9915771484375,wheelbase:2.6700000762939453,centerToFront:1.1748000383377075,steerRatio:15.329999923706055,steerRatioRear:0,rotationalInertia:2548.41552734375,tireStiffnessFront:186196.578125,tireStiffnessRear:231266.25,":longitudinalTuning.kpBP":[0,5,20],":longitudinalTuning.kpV":[1.2999999523162842,1,.699999988079071],":longitudinalTuning.kiBP":[0,5,12,20,27],":longitudinalTuning.kiV":[.3499999940395355,.23000000417232513,.20000000298023224,.17000000178813934,.10000000149011612],":longitudinalTuning.deadzoneBP":[0,8.050000190734863],":longitudinalTuning.deadzoneV":[0,.14000000059604645],":lateralTuning.indi.outerLoopGainBP":[18,22,26],":lateralTuning.indi.outerLoopGainV":[8,11,14.899999618530273],":lateralTuning.indi.innerLoopGainBP":[18,22,26],":lateralTuning.indi.innerLoopGainV":[9,12,15],":lateralTuning.indi.timeConstantBP":[18,22,26],":lateralTuning.indi.timeConstantV":[1,3,4.5],":lateralTuning.indi.actuatorEffectivenessBP":[18,22,26],":lateralTuning.indi.actuatorEffectivenessV":[9,12,15],steerLimitAlert:!1,vEgoStopping:0,directAccelControl:!1,stoppingControl:!1,startAccel:1.2000000476837158,steerRateCost:.5,steerControlType:"torque",radarOffCan:!1,steerActuatorDelay:.44999998807907104,openpilotLongitudinalControl:!0,carVin:"JTDS4MCE2MJ056503",isPandaBlack:!0,dashcamOnly:!1,safetyModelPassive:"silent",transmissionType:"unknown",radarTimeStep:.05000000074505806,communityFeature:!1,steerLimitTimer:.4000000059604645,fingerprintSource:"can",networkLocation:"fwdCamera",minSpeedCan:.30000001192092896,stoppingBrakeRate:.10000000149011612,startingBrakeRate:2},driverMonitoringState:{events:[],faceDetected:!0,isDistracted:!1,awarenessStatus:1,posePitchOffset:0,posePitchValidCount:0,poseYawOffset:0,poseYawValidCount:0,stepChange:.00909090880304575,awarenessActive:1,awarenessPassive:1,isLowStd:!0,hiStdCount:0,isActiveMode:!0,logMonoTime:0x70231fa3a65e},frontFrame:{frameId:235,encodeId:0,timestampEof:0x7023b15ee6e8,frameLength:4494,integLines:4483,globalGain:175,frameType:"front",timestampSof:0,lensPos:0,lensSag:0,lensErr:0,lensTruePos:0,gainFrac:.2196885049343109,recoverState:0},testJoystick:{axes:[],buttons:[],enabled:!1,axesMode:[]}},y=a(193),k=a(166),S=a(88),w=a(167),C=a(194),P=a(169),T=a(170),M=a(171),z=a(163),F=a(200),E=a(96),R=a.n(E),J=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).selected={},n.renderButtons=function(){var e=[];return Object.entries(_).forEach((function(t){var a=Object(f.a)(t,2),i=a[0],r=a[1];if("object"===typeof r){var o=[];Object.entries(r).forEach((function(e){var t=Object(f.a)(e,2),a=t[0];"DEBUG"!==t[1]&&"logMonoTime"!==a&&o.push(Object(s.jsx)(z.a,{style:{textTransform:"none",borderRadius:"0",minWidth:"40ch",maxHeight:"20px"},value:a,"aria-label":a,children:a},a))})),e.push(Object(s.jsxs)(y.a,{children:[Object(s.jsx)(k.a,{expandIcon:Object(s.jsx)(R.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(s.jsx)(S.a,{variant:"body1",children:i})}),Object(s.jsx)(w.a,{style:{justifyContent:"center"},children:Object(s.jsx)(F.a,{orientation:"vertical",value:n.selected[i],onChange:function(e,t){n.selected[i]=t,n.setState({render_revision:n.state.render_revision+1})},"aria-label":"lines selected",children:o})})]},i))}})),e},n.state={render_revision:0},n}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.show!==this.props.show||t.render_revision!==this.state.render_revision}},{key:"render",value:function(){var e=this;return this.selected=this.props.prev_selection,Object(s.jsxs)(C.a,{open:this.props.show,"aria-labelledby":"form-dialog-title",children:[Object(s.jsx)(P.a,{children:this.renderButtons()}),Object(s.jsx)(T.a,{children:Object(s.jsx)(M.a,{onClick:function(){return e.props.setLogParams(e.selected)},color:"default",children:"Save"})})]})}}]),a}(n.Component),D=a(172),L=a(173),A=a(174),H=a(197),I=a(175),W=a(176),B=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).plotname="",n.lines=[],n.renderButtons=function(){return n.props.lines_available.map((function(e){return Object(s.jsx)(z.a,{style:{textTransform:"none",borderRadius:"0",minWidth:"25ch",maxHeight:"20px"},value:e,"aria-label":e,children:e},e)}))},n.state={render_revision:0},n}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.show!==this.props.show||t.render_revision!==this.state.render_revision}},{key:"render",value:function(){var e=this;return Object(s.jsxs)(C.a,{open:this.props.show,"aria-labelledby":"form-dialog-title",children:[Object(s.jsx)(D.a,{id:"form-dialog-title",children:"Add Graph"}),Object(s.jsx)(P.a,{children:Object(s.jsxs)(L.a,{container:!0,spacing:2,direction:"column",alignItems:"center",children:[Object(s.jsx)(L.a,{item:!0,children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"plotname",children:"Plot Name"}),Object(s.jsx)(I.a,{id:"plotname",onChange:function(t){return e.plotname=t.target.value},"aria-describedby":"plotname-helper-text",inputProps:{"aria-label":"Plot Name"}}),Object(s.jsx)(W.a,{id:"plotname-helper-text",children:"Can be left empty"})]})}),Object(s.jsx)(L.a,{item:!0,children:Object(s.jsx)(F.a,{orientation:"vertical",value:this.lines,onChange:function(t,a){e.lines=a,e.setState({render_revision:e.state.render_revision+1})},"aria-label":"lines available",children:this.renderButtons()})})]})}),Object(s.jsx)(T.a,{children:Object(s.jsx)(M.a,{onClick:function(){return e.props.addplot(e.plotname,e.lines)},color:"default",children:"Save"})})]})}}]),a}(n.Component),U=a(177),V=a(178),N=a(198),G=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={cols:0,rateHz:20,max_datapoints:100,webgl:!0},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({cols:this.props.cols,rateHz:this.props.rateHz,max_datapoints:this.props.max_datapoints,webgl:this.props.webgl})}},{key:"shouldComponentUpdate",value:function(e,t){return e.show!==this.props.show||t!==this.state}},{key:"render",value:function(){var e=this;return Object(s.jsxs)(C.a,{open:this.props.show,"aria-labelledby":"form-dialog-title",children:[Object(s.jsx)(D.a,{id:"form-dialog-title",children:"Graphs settings"}),Object(s.jsx)(P.a,{children:Object(s.jsxs)(L.a,{container:!0,spacing:2,direction:"column",alignItems:"flex-start",children:[Object(s.jsx)(L.a,{item:!0,children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"cols",children:"Graph columns"}),Object(s.jsx)(I.a,{id:"cols",value:this.state.cols,onChange:function(t){return e.setState({cols:Math.min(Math.max(parseInt(t.target.value),1),12)})},"aria-describedby":"cols-helper-text",inputProps:{"aria-label":"Graph columns"}}),Object(s.jsx)(W.a,{id:"cols-helper-text",children:"Max: 12"})]})}),Object(s.jsx)(L.a,{item:!0,children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"rateHz",children:"Render rate"}),Object(s.jsx)(I.a,{id:"rateHz",value:this.state.rateHz,onChange:function(t){return e.setState({rateHz:Math.min(Math.max(parseInt(t.target.value),.5),20)})},endAdornment:Object(s.jsx)(U.a,{position:"end",children:"Hz"}),"aria-describedby":"rateHz-helper-text",inputProps:{"aria-label":"Render rate"}}),Object(s.jsx)(W.a,{id:"rateHz-helper-text",children:"Min: 0.5, Max: 20"})]})}),Object(s.jsx)(L.a,{item:!0,children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"max_datapoints",children:"Max data points"}),Object(s.jsx)(I.a,{id:"max_datapoints",value:this.state.max_datapoints,onChange:function(t){return e.setState({max_datapoints:Math.min(Math.max(parseInt(t.target.value),20),1e4)})},"aria-describedby":"max_datapoints-helper-text",inputProps:{"aria-label":"Max data points"}}),Object(s.jsx)(W.a,{id:"max_datapoints-helper-text",children:"Max: 10000"})]})}),Object(s.jsx)(L.a,{item:!0,children:Object(s.jsx)(V.a,{control:Object(s.jsx)(N.a,{checked:this.state.webgl,onChange:function(){return e.setState({webgl:!e.state.webgl})},name:"webGL"}),label:"WebGL support"})})]})}),Object(s.jsx)(T.a,{children:Object(s.jsx)(M.a,{onClick:function(){return e.props.setSettings(e.state.cols,e.state.rateHz,e.state.max_datapoints,e.state.webgl)},color:"default",children:"Save"})})]})}}]),a}(n.Component),Y=a(5),X=a(201),q=a(202),K=a(196),Z=a(97),$=a.n(Z),Q=a(98),ee=a.n(Q),te=a(53),ae=a.n(te),se=a(85),ne=a.n(se),ie={x:[],y:[],type:"scattergl",name:"Line 1",mode:"lines",connectgaps:!1,datarevision:0},re={layout:{title:"debug_filler",datarevision:0},frames:[],config:{},revision:0,lines_attach:[]},oe=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).actions=[{icon:Object(s.jsx)($.a,{}),name:"Add Signals",handler:function(){n.setState({show_addlines:!0})}},{icon:Object(s.jsx)(ee.a,{}),name:"Add Graph",handler:function(){n.setState({show_addgraph:!0})}},{icon:Object(s.jsx)(ae.a,{}),name:"Settings",handler:function(){n.setState({show_settings:!0})}},{icon:Object(s.jsx)(ne.a,{}),name:"DelPlots",handler:function(){n.plots={}}},{icon:Object(s.jsx)(ne.a,{}),name:"ClearLines",handler:function(){n.lines={},n.selected={}}}],n.plots={},n.lines={},n.selected={},n.ws_status="",n.data_counter=0,n.renderDelay=function(){clearInterval(n.render_delay),n.data_counter>n.state.render_revision&&n.setState({render_revision:n.data_counter}),n.render_delay=setInterval(n.renderDelay,1e3/n.state.rateHz)},n.messageProcess=function(e){Object.keys(n.selected).forEach((function(t){n.selected[t].forEach((function(a){if(e[t]){var s=Math.round(e[t].logMonoTime/1e6)/1e3,i=null;if(a.startsWith(":")){var r=a.slice(1);i=p.a.get(e[t],r,null)}else i=e[t][a];var o=t+":"+a;Array.isArray(i)?i.forEach((function(e,t){"boolean"===typeof e&&(e+=0),"number"!==typeof e&&(e=null),n.addUpdateLines(o+t,s,e,n.state.max_datapoints)})):("boolean"===typeof i&&(i+=0),"number"!==typeof i&&(i=null),n.addUpdateLines(a,s,i,n.state.max_datapoints))}}))}))},n.addUpdateLines=function(e,t,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;if(!n.lines[e]){var i=JSON.parse(JSON.stringify(ie));i.type=n.state.webgl?"scattergl":"scatter",i.name=e,n.lines[e]=i}n.lines[e].x.slice(-1)[0]>=t||(n.lines[e].x.push(t),n.lines[e].y.push(a),n.lines[e].x.length>s&&0!==s&&(n.lines[e].x.shift(),n.lines[e].y.shift()),n.lines[e].datarevision+=1,n.data_counter+=1)},n.addUpdatePlots=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(0===e.length&&(e=(Math.random()+1).toString(36).substring(7)),!n.plots[e]&&a.length>0){var s=JSON.parse(JSON.stringify(re));s.layout.title=e,s.lines_attach=a,n.plots[e]=s}a.length>0&&(n.plots[e].lines_attach=a),n.plots[e]&&(n.plots[e].revision=t,n.plots[e].layout.datarevision=t)},n.renderReadyPlots=function(){var e=[];return Object.keys(n.plots).forEach((function(t){if(n.plots[t].lines_attach.length){var a={},i=0;Object.values(n.plots[t].lines_attach).forEach((function(e){n.lines[e]&&(a[e]=n.lines[e],i+=n.lines[e].datarevision)})),n.addUpdatePlots(t,i),e.push(Object(s.jsx)(L.a,{item:!0,xs:12,md:12/n.state.layout_cols,children:Object(s.jsx)(O,{event:n.plots[t],lines:a})},t))}})),e},n.state={show_addlines:!1,show_addgraph:!1,show_settings:!1,layout_cols:1,rateHz:10,max_datapoints:200,webgl:!0,speeddial:!1,render_revision:0},n.wshelper=i.a.createRef(),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.render_delay=setInterval(this.renderDelay,1e3/this.state.rateHz)}},{key:"componentWillUnmount",value:function(){clearInterval(this.render_delay)}},{key:"shouldComponentUpdate",value:function(e,t){return!!this.props.active&&(t.render_revision!==this.state.render_revision||t.speeddial!==this.state.speeddial||t.show_addlines!==this.state.show_addlines||t.show_addgraph!==this.state.show_addgraph||t.show_settings!==this.state.show_settings)}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(s.jsxs)(n.Fragment,{children:[Object(s.jsx)(L.a,{container:!0,direction:"row",spacing:0,justify:"flex-start",alignItems:"flex-start",children:this.renderReadyPlots()}),this.state.show_addlines?Object(s.jsx)(J,{setLogParams:function(t){e.setState({show_addlines:!1}),e.selected=t},show:this.state.show_addlines,prev_selection:this.selected}):null,this.state.show_addgraph?Object(s.jsx)(B,{addplot:function(t,a){return e.setState({show_addgraph:!1},e.addUpdatePlots(t,0,a))},show:this.state.show_addgraph,lines_available:Object.keys(this.lines)}):null,this.state.show_settings?Object(s.jsx)(G,{setSettings:function(t,a,s,n){return e.setState({show_settings:!1,layout_cols:t,rateHz:a,max_datapoints:s,webgl:n})},show:this.state.show_settings,cols:this.state.layout_cols,rateHz:this.state.rateHz,max_datapoints:this.state.max_datapoints,webgl:this.state.webgl}):null,Object(s.jsx)(X.a,{ariaLabel:"SpeedDial tooltip example",className:t.speedDial,icon:Object(s.jsx)(q.a,{}),FabProps:{size:"small",color:"secondary"},onClick:function(){return e.setState({speeddial:!e.state.speeddial})},open:this.state.speeddial,children:this.actions.map((function(e){return Object(s.jsx)(K.a,{icon:e.icon,tooltipTitle:e.name,tooltipOpen:!0,onClick:e.handler},e.name)}))})]})}}]),a}(n.Component),le=Object(Y.a)((function(e){return{speedDial:{position:"fixed",bottom:e.spacing(1),right:e.spacing(1)},mainDiv:{flexGrow:1}}}))(oe),ce=a(189),de=a(199),he=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state=s.props.joy_finetune,s}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return t!==this.state}},{key:"render",value:function(){var e=this,t=p.a.cloneDeep(this.state);return Object(s.jsxs)(C.a,{open:this.props.show,"aria-labelledby":"joystick-settings",children:[Object(s.jsx)(D.a,{id:"joystick-settings",children:"Joystick settings"}),Object(s.jsx)(P.a,{children:Object(s.jsxs)(L.a,{container:!0,spacing:1,direction:"row",alignItems:"center",children:[Object(s.jsx)(L.a,{item:!0,xs:6,children:Object(s.jsxs)(L.a,{container:!0,alignItems:"center",spacing:2,children:[Object(s.jsx)(L.a,{item:!0,xs:6,align:"center",children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"axis_0_neg",children:"axis_0 negative"}),Object(s.jsx)(I.a,{id:"axis_0_neg",value:t.axes_scale[0][0],onChange:function(a){t.axes_scale[0][0]=a.target.value,e.setState(t)},inputProps:{"aria-label":"axis_0 negative",style:{textAlign:"center"}}})]})}),Object(s.jsx)(L.a,{item:!0,xs:6,align:"center",children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"axis_0_pos",children:"axis_0 positive"}),Object(s.jsx)(I.a,{id:"axis_0_pos",value:t.axes_scale[0][1],onChange:function(a){t.axes_scale[0][1]=a.target.value,e.setState(t)},inputProps:{"aria-label":"axis_0 positive",style:{textAlign:"center"}}})]})}),Object(s.jsx)(L.a,{item:!0,xs:6,align:"center",children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"axis_1_neg",children:"axis_1 negative"}),Object(s.jsx)(I.a,{id:"axis_1_neg",value:t.axes_scale[1][0],onChange:function(a){t.axes_scale[1][0]=a.target.value,e.setState(t)},inputProps:{"aria-label":"axis_1 negative",style:{textAlign:"center"}}})]})}),Object(s.jsx)(L.a,{item:!0,xs:6,align:"center",children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"axis_1_pos",children:"axis_1 positive"}),Object(s.jsx)(I.a,{id:"axis_1_pos",value:t.axes_scale[1][1],onChange:function(a){t.axes_scale[1][1]=a.target.value,e.setState(t)},inputProps:{"aria-label":"axis_1 positive",style:{textAlign:"center"}}})]})}),Object(s.jsx)(L.a,{item:!0,xs:12,align:"center",children:Object(s.jsxs)(A.a,{fullWidth:!0,children:[Object(s.jsx)(H.a,{htmlFor:">axis_0_deadzone",children:"axis_0 deadzone"}),Object(s.jsx)(I.a,{id:"axis_0_deadzone",value:t.axes_deadzone[0],onChange:function(a){t.axes_deadzone[0]=a.target.value,e.setState(t)},inputProps:{"aria-label":"axis_0 deadzone",style:{textAlign:"center"}}})]})}),Object(s.jsx)(L.a,{item:!0,xs:12,align:"center",children:Object(s.jsxs)(A.a,{fullWidth:!0,children:[Object(s.jsx)(H.a,{htmlFor:"axis_1_deadzone",children:"axis_1 deadzone"}),Object(s.jsx)(I.a,{id:"axis_1_deadzone",value:t.axes_deadzone[1],onChange:function(a){t.axes_deadzone[1]=a.target.value,e.setState(t)},inputProps:{"aria-label":"axis_1 deadzone",style:{textAlign:"center"}}})]})}),Object(s.jsx)(L.a,{item:!0,xs:12,align:"center",children:Object(s.jsxs)(A.a,{fullWidth:!0,children:[Object(s.jsx)(H.a,{htmlFor:"axis_0_mode",children:"axis_0 mode"}),Object(s.jsxs)(ce.a,{id:"axis_0_mode",value:t.axesMode[0],onChange:function(a){t.axesMode[0]=a.target.value,e.setState(t)},displayEmpty:!0,inputProps:{"aria-label":"axis_0 mode"},children:[Object(s.jsx)(de.a,{value:"interceptor",children:"interceptor"}),Object(s.jsx)(de.a,{value:"injector",children:"injector"}),Object(s.jsx)(de.a,{value:"adder",children:"adder"})]})]})}),Object(s.jsx)(L.a,{item:!0,xs:12,align:"center",children:Object(s.jsxs)(A.a,{fullWidth:!0,children:[Object(s.jsx)(H.a,{htmlFor:"axis_1_mode",children:"axis_1 mode"}),Object(s.jsxs)(ce.a,{id:"axis_1_mode",value:t.axesMode[1],onChange:function(a){t.axesMode[1]=a.target.value,e.setState(t)},displayEmpty:!0,inputProps:{"aria-label":"axis_1 mode"},children:[Object(s.jsx)(de.a,{value:"interceptor",children:"interceptor"}),Object(s.jsx)(de.a,{value:"injector",children:"injector"}),Object(s.jsx)(de.a,{value:"adder",children:"adder"})]})]})}),Object(s.jsx)(L.a,{item:!0,xs:12,align:"center",children:Object(s.jsx)(V.a,{control:Object(s.jsx)(N.a,{checked:t.restJoystick_0,onChange:function(){t.restJoystick_0=!t.restJoystick_0,e.setState(t)},name:"restJoystick_0"}),label:"vJoystick_0 rest"})})]})}),Object(s.jsx)(L.a,{item:!0,xs:6,children:Object(s.jsxs)(L.a,{container:!0,alignItems:"center",spacing:2,children:[Object(s.jsx)(L.a,{item:!0,xs:6,align:"center",children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"axis_2_neg",children:"axis_2 negative"}),Object(s.jsx)(I.a,{id:"axis_2_neg",value:t.axes_scale[2][0],onChange:function(a){t.axes_scale[2][0]=a.target.value,e.setState(t)},inputProps:{"aria-label":"axis_2 negative",style:{textAlign:"center"}}})]})}),Object(s.jsx)(L.a,{item:!0,xs:6,align:"center",children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"axis_2_pos",children:"axis_2 positive"}),Object(s.jsx)(I.a,{id:"axis_2_pos",value:t.axes_scale[2][1],onChange:function(a){t.axes_scale[2][1]=a.target.value,e.setState(t)},inputProps:{"aria-label":"axis_2 positive",style:{textAlign:"center"}}})]})}),Object(s.jsx)(L.a,{item:!0,xs:6,align:"center",children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"axis_3_neg",children:"axis_3 negative"}),Object(s.jsx)(I.a,{id:"axis_3_neg",value:t.axes_scale[3][0],onChange:function(a){t.axes_scale[3][0]=a.target.value,e.setState(t)},inputProps:{"aria-label":"axis_3 negative",style:{textAlign:"center"}}})]})}),Object(s.jsx)(L.a,{item:!0,xs:6,align:"center",children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"axis_3_pos",children:"axis_3 positive"}),Object(s.jsx)(I.a,{id:"axis_3_pos",value:t.axes_scale[3][1],onChange:function(a){t.axes_scale[3][1]=a.target.value,e.setState(t)},inputProps:{"aria-label":"axis_3 positive",style:{textAlign:"center"}}})]})}),Object(s.jsx)(L.a,{item:!0,xs:12,align:"center",children:Object(s.jsxs)(A.a,{fullWidth:!0,children:[Object(s.jsx)(H.a,{htmlFor:">axis_2_deadzone",children:"axis_2 deadzone"}),Object(s.jsx)(I.a,{id:"axis_2_deadzone",value:t.axes_deadzone[2],onChange:function(a){t.axes_deadzone[2]=a.target.value,e.setState(t)},inputProps:{"aria-label":"axis_2 deadzone",style:{textAlign:"center"}}})]})}),Object(s.jsx)(L.a,{item:!0,xs:12,align:"center",children:Object(s.jsxs)(A.a,{fullWidth:!0,children:[Object(s.jsx)(H.a,{htmlFor:"axis_3_deadzone",children:"axis_3 deadzone"}),Object(s.jsx)(I.a,{id:"axis_3_deadzone",value:t.axes_deadzone[3],onChange:function(a){t.axes_deadzone[3]=a.target.value,e.setState(t)},inputProps:{"aria-label":"axis_3 deadzone",style:{textAlign:"center"}}})]})}),Object(s.jsx)(L.a,{item:!0,xs:12,align:"center",children:Object(s.jsxs)(A.a,{fullWidth:!0,children:[Object(s.jsx)(H.a,{htmlFor:"axis_2_mode",children:"axis_2 mode"}),Object(s.jsxs)(ce.a,{id:"axis_2_mode",value:t.axesMode[2],onChange:function(a){t.axesMode[2]=a.target.value,e.setState(t)},displayEmpty:!0,inputProps:{"aria-label":"axis_2 mode"},children:[Object(s.jsx)(de.a,{value:"interceptor",children:"interceptor"}),Object(s.jsx)(de.a,{value:"injector",children:"injector"}),Object(s.jsx)(de.a,{value:"adder",children:"adder"})]})]})}),Object(s.jsx)(L.a,{item:!0,xs:12,align:"center",children:Object(s.jsxs)(A.a,{fullWidth:!0,children:[Object(s.jsx)(H.a,{htmlFor:"axis_3_mode",children:"axis_3 mode"}),Object(s.jsxs)(ce.a,{id:"axis_3_mode",value:t.axesMode[3],onChange:function(a){t.axesMode[3]=a.target.value,e.setState(t)},displayEmpty:!0,inputProps:{"aria-label":"axis_3 mode"},children:[Object(s.jsx)(de.a,{value:"interceptor",children:"interceptor"}),Object(s.jsx)(de.a,{value:"injector",children:"injector"}),Object(s.jsx)(de.a,{value:"adder",children:"adder"})]})]})}),Object(s.jsx)(L.a,{item:!0,xs:12,align:"center",children:Object(s.jsx)(V.a,{control:Object(s.jsx)(N.a,{checked:t.restJoystick_1,onChange:function(){t.restJoystick_1=!t.restJoystick_1,e.setState(t)},name:"restJoystick_1"}),label:"vJoystick_1 rest"})})]})})]})}),Object(s.jsx)(T.a,{children:Object(s.jsx)(M.a,{onClick:function(){return e.props.setSettings(e.state)},color:"default",children:"Save"})})]})}}]),a}(n.Component),ue=a(86),je=a.n(ue),pe=a(101),be=a.n(pe),xe=a(100),ge=a.n(xe),me=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).joystick_msg={testJoystick:{axes:[0,0,0,0],buttons:[],enabled:!0,axesMode:["","","",""]}},s.joy_finetune={axes_scale:[[1,1],[1,1],[1,1],[1,1]],axes_deadzone:[.01,.01,.01,.01],restJoystick_0:!0,restJoystick_1:!0,axesMode:["interceptor","interceptor","interceptor","interceptor"]},s.last_timestamp=0,s.data_revision=0,s.renderJoystick_0=!0,s.renderJoystick_1=!0,s.renderDelay=function(){clearInterval(s.render_delay),s.state.enabled&&(s.joystick_msg.testJoystick.axesMode=s.joy_finetune.axesMode,s.props.procData(s.joystick_msg)),s.state.revision!==s.data_revision&&s.setState({revision:s.data_revision}),s.render_delay=setInterval(s.renderDelay,1e3/s.state.rateHz)},s.resetMessage=function(){s.joystick_msg.testJoystick.enabled=s.state.enabled,s.state.enabled||s.props.procData(s.joystick_msg)},s.realGamepad=function(){var e=navigator.getGamepads();Object.values(e).forEach((function(e){if(e&&e.timestamp!==s.last_timestamp&&!e.id.startsWith("Surface")){e.axes.forEach((function(e,t){var a=e;if(t<s.joy_finetune.axes_scale.length){var n=parseFloat(s.joy_finetune.axes_deadzone[t]),i=parseFloat(s.joy_finetune.axes_scale[t][0]),r=parseFloat(s.joy_finetune.axes_scale[t][1]);-n<a&&a<n&&(a=0),a*=a<0?i:r}s.joystick_msg.testJoystick.axes[t]=a}));var t=[];Object.values(e.buttons).forEach((function(e){t.push(e.value)})),s.joystick_msg.testJoystick.buttons=t,s.data_revision+=1,s.last_timestamp=e.timestamp}}))},s.virtualJoystick=function(e,t){if(0===t)return s.joystick_msg.testJoystick.axes[e]=0,s.joystick_msg.testJoystick.axes[e+1]=0,void(s.data_revision+=1);var a=t.instance.options.size/2,n=(t.position.x-t.instance.position.x)/a*!t.lockX,i=(t.position.y-t.instance.position.y)/a*!t.lockY,r=s.joy_finetune.axes_scale;n*=n<0?parseFloat(r[e][0]):parseFloat(r[e][1]),i<0?parseFloat(i*=r[e+1][0]):i*=parseFloat(r[e+1][1]),s.joystick_msg.testJoystick.axes[e]=n,s.joystick_msg.testJoystick.axes[e+1]=i,s.data_revision+=1},s.state={show_settings:!1,rateHz:10,revision:0,speeddial:!1,enabled:!1},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.render_delay=setInterval(this.renderDelay,1e3/this.state.rateHz),this.checkJoy=setInterval(this.realGamepad,50)}},{key:"componentWillUnmount",value:function(){clearInterval(this.render_delay),clearInterval(this.checkJoy)}},{key:"shouldComponentUpdate",value:function(e,t){return!!this.props.active&&(t.revision!==this.state.revision||t.speeddial!==this.state.speeddial||t!==this.state.show_settings)}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(s.jsxs)(n.Fragment,{children:[Object(s.jsxs)(L.a,{className:t.joystick,container:!0,spacing:0,direction:"row",justify:"center",alignItems:"center",children:[Object(s.jsxs)(L.a,{item:!0,xs:6,align:"center",children:[Object(s.jsxs)(S.a,{variant:"subtitle2",children:["X:",this.joystick_msg.testJoystick.axes[0].toFixed(3)," / Y:",this.joystick_msg.testJoystick.axes[1].toFixed(3)]}),this.renderJoystick_0?Object(s.jsx)(je.a,{options:{mode:"semi",position:{top:"50%",left:"50%"},color:"red",size:200,dynamicPage:!0,lockX:!1,lockY:!1,restJoystick:this.joy_finetune.restJoystick_0,threshold:.06},style:{outline:"1px dashed grey",height:"75vh",position:"relative"},onMove:function(t,a){return e.virtualJoystick(0,a)},onEnd:function(){e.joy_finetune.restJoystick_0&&e.virtualJoystick(0,0)}}):(this.renderJoystick_0=!0,null)]}),Object(s.jsxs)(L.a,{item:!0,xs:6,align:"center",children:[Object(s.jsxs)(S.a,{variant:"subtitle2",children:["X:",this.joystick_msg.testJoystick.axes[2].toFixed(3)," / Y:",this.joystick_msg.testJoystick.axes[3].toFixed(3)]}),this.renderJoystick_1?Object(s.jsx)(je.a,{options:{mode:"semi",position:{top:"50%",left:"50%"},color:"red",size:200,dynamicPage:!0,lockX:!1,lockY:!1,restJoystick:this.joy_finetune.restJoystick_1,threshold:.06},style:{outline:"1px dashed grey",height:"75vh",position:"relative"},onMove:function(t,a){return e.virtualJoystick(2,a)},onEnd:function(){e.joy_finetune.restJoystick_1&&e.virtualJoystick(2,0)}}):(this.renderJoystick_1=!0,null)]})]}),Object(s.jsxs)(X.a,{ariaLabel:"SpeedDial tooltip example",className:t.speedDial,icon:Object(s.jsx)(q.a,{}),FabProps:{size:"small",color:"secondary"},onClick:function(){return e.setState({speeddial:!e.state.speeddial})},open:this.state.speeddial,children:[Object(s.jsx)(K.a,{icon:this.state.enabled?Object(s.jsx)(ge.a,{}):Object(s.jsx)(be.a,{}),tooltipTitle:this.state.enabled?"Disable":"Enable",tooltipOpen:!0,onClick:function(){return e.setState({enabled:!e.state.enabled},e.resetMessage)}}),Object(s.jsx)(K.a,{icon:Object(s.jsx)(ae.a,{}),tooltipTitle:"Settings",tooltipOpen:!0,onClick:function(){e.setState({show_settings:!0})}})]}),this.state.show_settings?Object(s.jsx)(he,{setSettings:function(t){e.setState({show_settings:!1}),e.joy_finetune=t,e.renderJoystick_0=!1,e.renderJoystick_1=!1},show:this.state.show_settings,joy_finetune:this.joy_finetune}):null]})}}]),a}(n.Component),ve=Object(Y.a)((function(e){return{joystick:{height:"80vh"},speedDial:{position:"fixed",bottom:e.spacing(1),right:e.spacing(1)}}}))(me),Oe=a(179),fe=a(78),_e=a.n(fe),ye=a(79),ke=a.n(ye),Se=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).last_timestamp=0,n.data_revision=0,n.renderDelay=function(){clearInterval(n.render_delay),n.setState({revision:n.revision+1}),n.render_delay=setInterval(n.renderDelay,1e3/n.state.rateHz)},n.messageProcess=function(e){"opEdit"in e&&n.setState({op_data:e.opEdit})},n.renderParams=function(e){var t=[];return Object.entries(e).forEach((function(a){var i=Object(f.a)(a,2),r=i[0],o=i[1];"boolean"===typeof o?t.push(Object(s.jsx)(L.a,{item:!0,xs:12,sm:6,md:3,children:Object(s.jsx)(V.a,{id:r,control:Object(s.jsx)(N.a,{checked:o,onChange:function(){e[r]=!e[r],n.setState({op_data:e})},name:r}),label:r})},r)):"object"===typeof o?t.push(Object(s.jsx)(L.a,{item:!0,xs:12,sm:6,md:3,children:Object(s.jsxs)(A.a,{fullWidth:!0,children:[Object(s.jsx)(H.a,{htmlFor:"cols",children:r}),Object(s.jsx)(I.a,{id:r,value:o,onChange:function(t){e[r]=t.target.value.split(",").map((function(e){return parseFloat(e)})),n.setState({op_data:e})},"aria-describedby":"{key}-helper-text",inputProps:{"aria-label":{key:r},style:{textAlign:"center"}}})]})},r)):"number"===typeof o?t.push(Object(s.jsx)(L.a,{item:!0,xs:12,sm:6,md:3,children:Object(s.jsxs)(A.a,{fullWidth:!0,children:[Object(s.jsx)(H.a,{htmlFor:"cols",children:r}),Object(s.jsx)(I.a,{id:r,value:o,onChange:function(t){e[r]=parseFloat(t.target.value),n.setState({op_data:e})},"aria-describedby":"{key}-helper-text",inputProps:{"aria-label":{key:r},style:{textAlign:"center"}}})]})},r)):t.push(Object(s.jsx)(L.a,{item:!0,xs:12,sm:6,md:3,children:Object(s.jsxs)(A.a,{fullWidth:!0,children:[Object(s.jsx)(H.a,{htmlFor:"cols",children:r}),Object(s.jsx)(I.a,{id:r,value:o,onChange:function(t){e[r]=t.target.value,n.setState({op_data:e})},"aria-describedby":"{key}-helper-text",inputProps:{"aria-label":{key:r},style:{textAlign:"center"}}})]})},r))})),t},n.state={rateHz:10,revision:0,op_data:{}},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.render_delay=setInterval(this.renderDelay,1e3/this.state.rateHz)}},{key:"componentWillUnmount",value:function(){clearInterval(this.render_delay)}},{key:"shouldComponentUpdate",value:function(e,t){return!!this.props.active&&t.revision!==this.state.revision}},{key:"render",value:function(){var e=this,t=this.props.classes,a=p.a.cloneDeep(this.state.op_data);return Object(s.jsxs)(n.Fragment,{children:[Object(s.jsx)("div",{style:{padding:20},children:Object(s.jsxs)(L.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",children:[this.renderParams(a),Object(s.jsx)(L.a,{item:!0})]})}),Object(s.jsxs)(Oe.a,{variant:"extended",color:"secondary",className:t.loadFab,onClick:function(){return e.props.procData({opEdit:{loadRequest:!0}})},children:[Object(s.jsx)(_e.a,{className:t.extendedIcon}),"Load"]}),Object(s.jsxs)(Oe.a,{variant:"extended",color:"secondary",className:t.saveFab,onClick:function(){return e.props.procData({opEdit:e.state.op_data})},children:[Object(s.jsx)(ke.a,{className:t.extendedIcon}),"Save"]})]})}}]),a}(n.Component),we=Object(Y.a)((function(e){return{loadFab:{position:"fixed",bottom:e.spacing(1),right:e.spacing(14)},saveFab:{position:"fixed",bottom:e.spacing(1),right:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)}}}))(Se),Ce=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",Object(l.a)(Object(l.a)({role:"tabpanel",hidden:this.props.value!==this.props.index,id:"plugin-tabpanel-".concat(this.props.index),"aria-labelledby":"plugin-tab-".concat(this.props.index)},this.props),{},{children:this.props.children}))}}]),a}(n.Component),Pe=a(66),Te=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).timeout=250,s.connect=function(){var e=new WebSocket(s.props.ws_url);s.props.status("connecting");var t,a=Object(Pe.a)(s);e.onopen=function(){s.setState({ws:e}),s.props.status("connected"),a.timeout=250,clearTimeout(t)},e.onclose=function(e){console.log("Socket is closed. Reconnect will be attempted in ".concat(Math.min(5,2*a.timeout/1e3)," second."),e.reason),s.props.status("closed"),a.timeout=2*a.timeout,t=setTimeout(s.checkSocketConnection,Math.min(5e3,a.timeout))},e.onerror=function(t){console.error("Socket encountered error: ",t.message,"Closing socket"),s.props.status("error"),e.close()},e.onmessage=function(e){try{s.props.messageProcess(JSON.parse(e.data))}catch(t){console.log(t),console.log(e.data)}}},s.sendMessage=function(e){var t=s.state.ws;t&&t.readyState!==WebSocket.CLOSED&&t.send(JSON.stringify(e))},s.checkSocketConnection=function(){var e=s.state.ws;e&&e.readyState!==WebSocket.CLOSED||s.connect(s.props.ws_url)},s.state={ws:null},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.connect(),this.keep_alive=setInterval((function(){e.sendMessage({keepAlive:{}})}),2500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.keep_alive),this.setState({ws:null})}},{key:"shouldComponentUpdate",value:function(e){return e.ws_url!==this.props.ws_url}},{key:"render",value:function(){return null}}]),a}(n.Component),Me=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={ws_url:"ws://",rateHz:20,dark_theme:!1},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({ws_url:this.props.ws_url,rateHz:this.props.rateHz,dark_theme:this.props.dark_theme})}},{key:"shouldComponentUpdate",value:function(e,t){return e.show!==this.props.show||t!==this.state}},{key:"render",value:function(){var e=this;return Object(s.jsxs)(C.a,{open:this.props.show,"aria-labelledby":"form-dialog-title",children:[Object(s.jsx)(D.a,{id:"form-dialog-title",children:"Main settings"}),Object(s.jsx)(P.a,{children:Object(s.jsxs)(L.a,{container:!0,spacing:2,direction:"column",alignItems:"flex-start",children:[Object(s.jsx)(L.a,{item:!0,children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"ws_url",children:"WebSocket URL"}),Object(s.jsx)(I.a,{id:"ws_url",value:this.state.ws_url,onChange:function(t){return e.setState({ws_url:t.target.value})},"aria-describedby":"ws_url-helper-text",inputProps:{"aria-label":"WebSocket URL"}}),Object(s.jsx)(W.a,{id:"ws_url-helper-text",children:"Tethered WiFi ws://192.168.43.1:8989"})]})}),Object(s.jsx)(L.a,{item:!0,children:Object(s.jsxs)(A.a,{children:[Object(s.jsx)(H.a,{htmlFor:"rateHz",children:"Render rate"}),Object(s.jsx)(I.a,{id:"rateHz",value:this.state.rateHz,onChange:function(t){return e.setState({rateHz:Math.min(Math.max(parseInt(t.target.value),.5),20)})},endAdornment:Object(s.jsx)(U.a,{position:"end",children:"Hz"}),"aria-describedby":"rateHz-helper-text",inputProps:{"aria-label":"Render rate"}}),Object(s.jsx)(W.a,{id:"rateHz-helper-text",children:"Min: 0.5, Max: 20"})]})}),Object(s.jsx)(L.a,{item:!0,children:Object(s.jsx)(V.a,{control:Object(s.jsx)(N.a,{checked:this.state.dark_theme,onChange:function(){return e.setState({dark_theme:!e.state.dark_theme})},name:"dark_theme"}),label:"Dark theme"})})]})}),Object(s.jsx)(T.a,{children:Object(s.jsx)(M.a,{onClick:function(){return e.props.setSettings(e.state.ws_url,e.state.rateHz,e.state.dark_theme)},color:"default",children:"Save"})})]})}}]),a}(n.Component),ze=a(188),Fe=a(181),Ee=a(183),Re=a(184),Je=a(185),De=a(190),Le=a(186),Ae=a(195),He=a(191),Ie=a(133),We=a(103),Be=a.n(We),Ue=a(102),Ve=a.n(Ue),Ne=a(104),Ge=a.n(Ne),Ye=a(182),Xe=a(105),qe=Object(Xe.a)({palette:{type:"light"},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500}}),Ke=Object(Xe.a)({palette:{type:"dark"},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500},overrides:{MuiFormLabel:{root:{"&$focused":{color:"yellow"}}}}}),Ze=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).theme=qe,n.ws_status="",n.sent_count=0,n.received_count=0,n.show_error=!1,n.last_error_msg="",n.renderDelay=function(){clearInterval(n.render_delay),n.setState({render_revision:n.state.render_revision+1}),n.render_delay=setInterval(n.renderDelay,1e3/n.state.rateHz)},n.messageProcess=function(e){n.received_count>9999&&(n.received_count=0),n.received_count+=1,"error"in e?(n.show_error=!0,n.last_error_msg=e.error):"opEdit"in e?n.pushopedit.current.messageProcess(e):n.pushgraphdata.current&&n.pushgraphdata.current.messageProcess(e)},n.sendWSmsg=function(e){n.sent_count>9999&&(n.sent_count=0),n.sent_count+=1,n.wshelper.current.sendMessage(e)},n.connectionStatus=function(){return"connected"===n.ws_status?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(ze.a,{className:n.props.classes.iconSpaced,children:Object(s.jsx)(Fe.a,{anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:n.received_count,color:"secondary",showZero:!0,max:9999,children:Object(s.jsx)(_e.a,{color:"inherit"})})}),Object(s.jsx)(ze.a,{className:n.props.classes.iconSpaced,children:Object(s.jsx)(Fe.a,{anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:n.sent_count,color:"secondary",showZero:!0,max:9999,children:Object(s.jsx)(ke.a,{color:"inherit"})})}),Object(s.jsx)(Ve.a,{})]}):"connecting"===n.ws_status?Object(s.jsx)(Be.a,{}):Object(s.jsx)(Ge.a,{})},n.a11yProps=function(e){return{id:"plugin-tab-".concat(e),"aria-controls":"plugin-tabpanel-".concat(e)}},n.setTheme=function(e){return e!==n.state.dark_theme&&(n.setState({dark_theme:e}),n.theme=e?Object(l.a)({},Ke):Object(l.a)({},qe)),n.state.dark_theme?Ke:qe},"localhost"!==window.location.hostname&&(n.ws_url="ws://".concat(window.location.hostname,":8989")),n.state={selectedTab:1,show_mainsettings:!1,ws_url:n.ws_url||"ws://192.168.43.1:8989",rateHz:20,render_revision:0,dark_theme:!1},n.wshelper=i.a.createRef(),n.pushgraphdata=i.a.createRef(),n.pushopedit=i.a.createRef(),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.render_delay=setInterval(this.renderDelay,1e3/this.state.rateHz)}},{key:"shouldComponentUpdate",value:function(e,t){return t.render_revision!==this.state.render_revision}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)(Ye.a,{theme:this.theme,children:[Object(s.jsx)(Ee.a,{}),Object(s.jsx)(Te,{ws_url:this.state.ws_url,messageProcess:this.messageProcess,ref:this.wshelper,status:function(t){return e.ws_status=t}}),Object(s.jsx)(Re.a,{position:"sticky",color:"default",children:Object(s.jsxs)(Je.a,{children:[Object(s.jsxs)(De.a,{className:t.mainTabs,value:this.state.selectedTab,onChange:function(t,a){return e.setState({selectedTab:a})},indicatorColor:"secondary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"Plugins tabs",children:[Object(s.jsx)(Le.a,Object(l.a)({label:"Dashboard",disabled:!0},this.a11yProps(0))),Object(s.jsx)(Le.a,Object(l.a)({label:"Graphs"},this.a11yProps(1))),Object(s.jsx)(Le.a,Object(l.a)({label:"Joystick"},this.a11yProps(2))),Object(s.jsx)(Le.a,Object(l.a)({label:"OP Edit"},this.a11yProps(3))),Object(s.jsx)(Le.a,Object(l.a)({label:"CAN BUS",disabled:!0},this.a11yProps(4)))]}),this.connectionStatus(),Object(s.jsx)(Ie.a,{onClick:function(){e.setState({show_mainsettings:!0})},"aria-label":"WebSocket connection status",component:"span",color:"inherit",children:Object(s.jsx)(ae.a,{})})]})}),Object(s.jsx)(Ce,{value:this.state.selectedTab,index:0,children:"Dashboard will be here"}),Object(s.jsx)(Ce,{value:this.state.selectedTab,index:1,children:Object(s.jsx)(le,{ref:this.pushgraphdata,active:1===this.state.selectedTab})}),Object(s.jsx)(Ce,{value:this.state.selectedTab,index:2,children:Object(s.jsx)(ve,{procData:function(t){return e.sendWSmsg(t)},active:2===this.state.selectedTab})}),Object(s.jsx)(Ce,{value:this.state.selectedTab,index:3,children:Object(s.jsx)(we,{ref:this.pushopedit,procData:function(t){return e.sendWSmsg(t)},active:3===this.state.selectedTab})}),Object(s.jsx)(Ce,{value:this.state.selectedTab,index:4,children:"CAN messages will be here"}),this.state.show_mainsettings?Object(s.jsx)(Me,{setSettings:function(t,a,s){e.setState({show_mainsettings:!1,ws_url:t,rateHz:a}),e.setTheme(s)},show:this.state.show_mainsettings,ws_url:this.state.ws_url,rateHz:this.state.rateHz,dark_theme:this.state.dark_theme}):null,Object(s.jsx)(Ae.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.show_error,autoHideDuration:5e3,onClose:function(){return e.show_error=!1},children:Object(s.jsx)(He.a,{elevation:6,variant:"filled",severity:"error",children:this.last_error_msg})})]})})}}]),a}(n.Component),$e=Object(Y.a)({iconSpaced:{padding:"0 40px 0 0"},mainTabs:{flexGrow:1}})(Ze);o.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)($e,{})}),document.getElementById("root"))}},[[130,1,2]]]);
//# sourceMappingURL=main.e0f564f0.chunk.js.map